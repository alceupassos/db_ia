module.exports=[69882,a=>{"use strict";var b=a.i(83674);let c=(0,b.createServerReference)("00f512c64707a4985c37eb46128af65ae3dc4ac475",b.callServer,void 0,b.findSourceMapURL,"getUniqueClientes");a.s(["getUniqueClientes",()=>c])},72130,a=>{"use strict";var b=a.i(83674);let c=(0,b.createServerReference)("00026e1710be57f038693261f67e8e67c5c0b599f8",b.callServer,void 0,b.findSourceMapURL,"getUniqueResponsaveis");a.s(["getUniqueResponsaveis",()=>c])},27087,a=>{"use strict";var b=a.i(40975),c=a.i(13836),d=a.i(88135),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(91380),g=a.i(89467);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],27087)},88143,a=>{"use strict";var b=a.i(40975),c=a.i(13836),d=a.i(89467);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},83674,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(17731),g=a.r(23276),h=a.r(36381)},57529,a=>{"use strict";let b=(0,a.i(56618).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],57529)},27926,486,a=>{"use strict";var b=a.i(56618);let c=(0,b.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>c],27926);let d=(0,b.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>d],486)},36802,a=>{"use strict";var b=a.i(40975),c=a.i(13836),d=a.i(83674);let e=(0,d.createServerReference)("4027a9edcf961ae7b0f5af4b119d41462f5443359c",d.callServer,void 0,d.findSourceMapURL,"createDemanda");var f=a.i(69882),g=a.i(72130),h=a.i(27926),i=a.i(486),j=a.i(53938),k=a.i(40686),l=a.i(7280),m=a.i(41273),n=a.i(90265),o=a.i(88143),p=a.i(45726),q=a.i(27087);function r(){let a=(0,l.useRouter)(),[d,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)({cliente_nome:"",demanda:"",responsavel:"",data_solicitacao:new Date().toISOString().split("T")[0],prazo:"",data_entrega:"",status:"PENDENTE",observacoes:"",documentos_assinados:"EM ANDAMENTO"}),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!1);async function C(){try{let[a,b]=await Promise.all([(0,f.getUniqueClientes)(),(0,g.getUniqueResponsaveis)()]);t(a),v(b)}catch(a){console.error("Erro ao carregar dados:",a)}}(0,c.useEffect)(()=>{C()},[]);let D=async b=>{b.preventDefault(),r(!0);try{await e({...w,data_solicitacao:w.data_solicitacao||null,prazo:w.prazo||null,data_entrega:w.data_entrega||null,data_pagamento:null,data_fim_contrato:null,observacoes:w.observacoes||null,cliente_id:null}),a.push("/juridico")}catch(a){console.error("Erro ao criar demanda:",a),alert("Erro ao criar demanda: "+(a instanceof Error?a.message:"Erro desconhecido"))}finally{r(!1)}};return(0,b.jsxs)("div",{className:"flex-1 space-y-6 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(k.default,{href:"/juridico",children:(0,b.jsx)(m.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(h.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Nova Demanda Jurídica"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Preencha os dados abaixo para criar uma nova demanda"})]})]}),(0,b.jsxs)(o.Card,{children:[(0,b.jsx)(o.CardHeader,{children:(0,b.jsx)(o.CardTitle,{children:"Informações da Demanda"})}),(0,b.jsx)(o.CardContent,{children:(0,b.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"cliente",children:"Cliente *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.Input,{id:"cliente",type:"text",value:w.cliente_nome,onChange:a=>{var b;return b=a.target.value,void(x({...w,cliente_nome:b}),b.length>0?(z(s.filter(a=>a.toLowerCase().includes(b.toLowerCase())).slice(0,5)),B(!0)):B(!1))},onBlur:()=>setTimeout(()=>B(!1),200),placeholder:"Digite o nome do cliente",required:!0}),A&&y.length>0&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-popover border border-border rounded-md shadow-md overflow-hidden",children:y.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>{x({...w,cliente_nome:a}),B(!1)},className:"w-full px-4 py-2 text-left hover:bg-accent transition-colors",children:a},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"demanda",children:"Demanda *"}),(0,b.jsx)("textarea",{id:"demanda",value:w.demanda,onChange:a=>x({...w,demanda:a.target.value}),placeholder:"Descreva a demanda jurídica",required:!0,rows:3,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"responsavel",children:"Responsável *"}),(0,b.jsxs)(p.Select,{value:w.responsavel,onValueChange:a=>{"__new__"===a?x({...w,responsavel:""}):x({...w,responsavel:a})},required:!0,children:[(0,b.jsx)(p.SelectTrigger,{id:"responsavel",children:(0,b.jsx)(p.SelectValue,{placeholder:"Selecione um responsável"})}),(0,b.jsxs)(p.SelectContent,{children:[u.map(a=>(0,b.jsx)(p.SelectItem,{value:a,children:a},a)),(0,b.jsx)(p.SelectItem,{value:"__new__",children:"+ Adicionar novo"})]})]}),""===w.responsavel&&(0,b.jsx)(n.Input,{placeholder:"Nome do novo responsável",onChange:a=>x({...w,responsavel:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"data_solicitacao",children:"Data de Solicitação"}),(0,b.jsx)(n.Input,{id:"data_solicitacao",type:"date",value:w.data_solicitacao,onChange:a=>x({...w,data_solicitacao:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"prazo",children:"Prazo"}),(0,b.jsx)(n.Input,{id:"prazo",type:"date",value:w.prazo,onChange:a=>x({...w,prazo:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"data_entrega",children:"Data de Entrega"}),(0,b.jsx)(n.Input,{id:"data_entrega",type:"date",value:w.data_entrega,onChange:a=>x({...w,data_entrega:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"status",children:"Status"}),(0,b.jsxs)(p.Select,{value:w.status,onValueChange:a=>x({...w,status:a}),children:[(0,b.jsx)(p.SelectTrigger,{id:"status",children:(0,b.jsx)(p.SelectValue,{})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"PENDENTE",children:"Pendente"}),(0,b.jsx)(p.SelectItem,{value:"EM ANDAMENTO",children:"Em Andamento"}),(0,b.jsx)(p.SelectItem,{value:"CONCLUÍDO",children:"Concluído"}),(0,b.jsx)(p.SelectItem,{value:"Cancelado",children:"Cancelado"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"observacoes",children:"Observações"}),(0,b.jsx)("textarea",{id:"observacoes",value:w.observacoes,onChange:a=>x({...w,observacoes:a.target.value}),placeholder:"Observações adicionais",rows:4,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"documentos_assinados",children:"Documentos Assinados"}),(0,b.jsxs)(p.Select,{value:w.documentos_assinados,onValueChange:a=>x({...w,documentos_assinados:a}),children:[(0,b.jsx)(p.SelectTrigger,{id:"documentos_assinados",children:(0,b.jsx)(p.SelectValue,{})}),(0,b.jsxs)(p.SelectContent,{children:[(0,b.jsx)(p.SelectItem,{value:"EM ANDAMENTO",children:"Em Andamento"}),(0,b.jsx)(p.SelectItem,{value:"CONCLUÍDO",children:"Concluído"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)(m.Button,{type:"submit",disabled:d,className:"flex-1",children:d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Save,{className:"mr-2 h-4 w-4"}),"Salvar Demanda"]})}),(0,b.jsx)(k.default,{href:"/juridico",children:(0,b.jsx)(m.Button,{type:"button",variant:"outline",children:"Cancelar"})})]})]})})]})]})}a.s(["default",()=>r],36802)}];

//# sourceMappingURL=dev_db_ai_c29d1a5f._.js.map