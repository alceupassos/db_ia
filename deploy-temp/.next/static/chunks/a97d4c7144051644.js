(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85012,e=>{"use strict";var a=e.i(71940);let s=(0,a.createServerReference)("00f512c64707a4985c37eb46128af65ae3dc4ac475",a.callServer,void 0,a.findSourceMapURL,"getUniqueClientes");e.s(["getUniqueClientes",()=>s])},9709,e=>{"use strict";var a=e.i(71940);let s=(0,a.createServerReference)("00026e1710be57f038693261f67e8e67c5c0b599f8",a.callServer,void 0,a.findSourceMapURL,"getUniqueResponsaveis");e.s(["getUniqueResponsaveis",()=>s])},99637,e=>{"use strict";var a=e.i(15696),s=e.i(433),r=e.i(9569),t=s.forwardRef((e,s)=>(0,a.jsx)(r.Primitive.label,{...e,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));t.displayName="Label";var l=e.i(64773),n=e.i(80477);let i=(0,l.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)(t,{ref:r,className:(0,n.cn)(i(),e),...s}));d.displayName=t.displayName,e.s(["Label",()=>d],99637)},48746,e=>{"use strict";var a=e.i(15696),s=e.i(433),r=e.i(80477);let t=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));t.displayName="Card";let l=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let n=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));n.displayName="CardTitle";let i=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));i.displayName="CardDescription";let d=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",e),...s}));d.displayName="CardContent",s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter",e.s(["Card",()=>t,"CardContent",()=>d,"CardDescription",()=>i,"CardHeader",()=>l,"CardTitle",()=>n])},71940,(e,a,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={callServer:function(){return l.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return n.findSourceMapURL}};for(var t in r)Object.defineProperty(s,t,{enumerable:!0,get:r[t]});let l=e.r(9694),n=e.r(75127),i=e.r(5951)},84627,e=>{"use strict";let a=(0,e.i(20587).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>a],84627)},87132,41420,e=>{"use strict";var a=e.i(20587);let s=(0,a.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],87132);let r=(0,a.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>r],41420)},96628,e=>{"use strict";var a=e.i(15696),s=e.i(433),r=e.i(71940);let t=(0,r.createServerReference)("4027a9edcf961ae7b0f5af4b119d41462f5443359c",r.callServer,void 0,r.findSourceMapURL,"createDemanda");var l=e.i(85012),n=e.i(9709),i=e.i(87132),d=e.i(41420),o=e.i(77952),c=e.i(42915),u=e.i(33870),m=e.i(30418),v=e.i(98744),h=e.i(48746),p=e.i(99209),f=e.i(99637);function x(){let e=(0,u.useRouter)(),[r,x]=(0,s.useState)(!1),[g,j]=(0,s.useState)([]),[b,N]=(0,s.useState)([]),[S,C]=(0,s.useState)({cliente_nome:"",demanda:"",responsavel:"",data_solicitacao:new Date().toISOString().split("T")[0],prazo:"",data_entrega:"",status:"PENDENTE",observacoes:"",documentos_assinados:"EM ANDAMENTO"}),[y,_]=(0,s.useState)([]),[w,R]=(0,s.useState)(!1);async function D(){try{let[e,a]=await Promise.all([(0,l.getUniqueClientes)(),(0,n.getUniqueResponsaveis)()]);j(e),N(a)}catch(e){console.error("Erro ao carregar dados:",e)}}(0,s.useEffect)(()=>{D()},[]);let L=async a=>{a.preventDefault(),x(!0);try{await t({...S,data_solicitacao:S.data_solicitacao||null,prazo:S.prazo||null,data_entrega:S.data_entrega||null,data_pagamento:null,data_fim_contrato:null,observacoes:S.observacoes||null,cliente_id:null}),e.push("/juridico")}catch(e){console.error("Erro ao criar demanda:",e),alert("Erro ao criar demanda: "+(e instanceof Error?e.message:"Erro desconhecido"))}finally{x(!1)}};return(0,a.jsxs)("div",{className:"flex-1 space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(c.default,{href:"/juridico",children:(0,a.jsx)(m.Button,{variant:"ghost",size:"icon",children:(0,a.jsx)(i.ArrowLeft,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Nova Demanda Jurídica"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Preencha os dados abaixo para criar uma nova demanda"})]})]}),(0,a.jsxs)(h.Card,{children:[(0,a.jsx)(h.CardHeader,{children:(0,a.jsx)(h.CardTitle,{children:"Informações da Demanda"})}),(0,a.jsx)(h.CardContent,{children:(0,a.jsxs)("form",{onSubmit:L,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.Label,{htmlFor:"cliente",children:"Cliente *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v.Input,{id:"cliente",type:"text",value:S.cliente_nome,onChange:e=>{var a;return a=e.target.value,void(C({...S,cliente_nome:a}),a.length>0?(_(g.filter(e=>e.toLowerCase().includes(a.toLowerCase())).slice(0,5)),R(!0)):R(!1))},onBlur:()=>setTimeout(()=>R(!1),200),placeholder:"Digite o nome do cliente",required:!0}),w&&y.length>0&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-popover border border-border rounded-md shadow-md overflow-hidden",children:y.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>{C({...S,cliente_nome:e}),R(!1)},className:"w-full px-4 py-2 text-left hover:bg-accent transition-colors",children:e},e))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.Label,{htmlFor:"demanda",children:"Demanda *"}),(0,a.jsx)("textarea",{id:"demanda",value:S.demanda,onChange:e=>C({...S,demanda:e.target.value}),placeholder:"Descreva a demanda jurídica",required:!0,rows:3,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.Label,{htmlFor:"responsavel",children:"Responsável *"}),(0,a.jsxs)(p.Select,{value:S.responsavel,onValueChange:e=>{"__new__"===e?C({...S,responsavel:""}):C({...S,responsavel:e})},required:!0,children:[(0,a.jsx)(p.SelectTrigger,{id:"responsavel",children:(0,a.jsx)(p.SelectValue,{placeholder:"Selecione um responsável"})}),(0,a.jsxs)(p.SelectContent,{children:[b.map(e=>(0,a.jsx)(p.SelectItem,{value:e,children:e},e)),(0,a.jsx)(p.SelectItem,{value:"__new__",children:"+ Adicionar novo"})]})]}),""===S.responsavel&&(0,a.jsx)(v.Input,{placeholder:"Nome do novo responsável",onChange:e=>C({...S,responsavel:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.Label,{htmlFor:"data_solicitacao",children:"Data de Solicitação"}),(0,a.jsx)(v.Input,{id:"data_solicitacao",type:"date",value:S.data_solicitacao,onChange:e=>C({...S,data_solicitacao:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.Label,{htmlFor:"prazo",children:"Prazo"}),(0,a.jsx)(v.Input,{id:"prazo",type:"date",value:S.prazo,onChange:e=>C({...S,prazo:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.Label,{htmlFor:"data_entrega",children:"Data de Entrega"}),(0,a.jsx)(v.Input,{id:"data_entrega",type:"date",value:S.data_entrega,onChange:e=>C({...S,data_entrega:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.Label,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(p.Select,{value:S.status,onValueChange:e=>C({...S,status:e}),children:[(0,a.jsx)(p.SelectTrigger,{id:"status",children:(0,a.jsx)(p.SelectValue,{})}),(0,a.jsxs)(p.SelectContent,{children:[(0,a.jsx)(p.SelectItem,{value:"PENDENTE",children:"Pendente"}),(0,a.jsx)(p.SelectItem,{value:"EM ANDAMENTO",children:"Em Andamento"}),(0,a.jsx)(p.SelectItem,{value:"CONCLUÍDO",children:"Concluído"}),(0,a.jsx)(p.SelectItem,{value:"Cancelado",children:"Cancelado"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.Label,{htmlFor:"observacoes",children:"Observações"}),(0,a.jsx)("textarea",{id:"observacoes",value:S.observacoes,onChange:e=>C({...S,observacoes:e.target.value}),placeholder:"Observações adicionais",rows:4,className:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.Label,{htmlFor:"documentos_assinados",children:"Documentos Assinados"}),(0,a.jsxs)(p.Select,{value:S.documentos_assinados,onValueChange:e=>C({...S,documentos_assinados:e}),children:[(0,a.jsx)(p.SelectTrigger,{id:"documentos_assinados",children:(0,a.jsx)(p.SelectValue,{})}),(0,a.jsxs)(p.SelectContent,{children:[(0,a.jsx)(p.SelectItem,{value:"EM ANDAMENTO",children:"Em Andamento"}),(0,a.jsx)(p.SelectItem,{value:"CONCLUÍDO",children:"Concluído"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)(m.Button,{type:"submit",disabled:r,className:"flex-1",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Save,{className:"mr-2 h-4 w-4"}),"Salvar Demanda"]})}),(0,a.jsx)(c.default,{href:"/juridico",children:(0,a.jsx)(m.Button,{type:"button",variant:"outline",children:"Cancelar"})})]})]})})]})]})}e.s(["default",()=>x],96628)}]);