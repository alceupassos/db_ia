(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9709,e=>{"use strict";var a=e.i(71940);let t=(0,a.createServerReference)("00026e1710be57f038693261f67e8e67c5c0b599f8",a.callServer,void 0,a.findSourceMapURL,"getUniqueResponsaveis");e.s(["getUniqueResponsaveis",()=>t])},85012,e=>{"use strict";var a=e.i(71940);let t=(0,a.createServerReference)("00f512c64707a4985c37eb46128af65ae3dc4ac475",a.callServer,void 0,a.findSourceMapURL,"getUniqueClientes");e.s(["getUniqueClientes",()=>t])},90739,30836,e=>{"use strict";var a=e.i(71940);let t=(0,a.createServerReference)("401e67d38b57b3c4dad7b28a34e7f256632b736dfd",a.callServer,void 0,a.findSourceMapURL,"deleteDemanda");e.s(["deleteDemanda",()=>t],90739);let s=(0,e.i(20587).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>s],30836)},48746,e=>{"use strict";var a=e.i(15696),t=e.i(433),s=e.i(80477);let r=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));r.displayName="Card";let n=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let l=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let i=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...t}));i.displayName="CardDescription";let d=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardDescription",()=>i,"CardHeader",()=>n,"CardTitle",()=>l])},71940,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={callServer:function(){return n.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return l.findSourceMapURL}};for(var r in s)Object.defineProperty(t,r,{enumerable:!0,get:s[r]});let n=e.r(9694),l=e.r(75127),i=e.r(5951)},21303,16780,e=>{"use strict";let a=(0,e.i(20587).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],21303);var t=e.i(15696),s=e.i(40977),r=e.i(433),n=e.i(71732),l=e.i(1860),i=e.i(80477);let d=n.Root,c=n.Trigger,o=n.Portal;n.Close;let m=r.forwardRef((e,a)=>{let r,l,d,c,o=(0,s.c)(9);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(d=(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),o[3]=r,o[4]=d):d=o[4],o[5]!==l||o[6]!==a||o[7]!==d?(c=(0,t.jsx)(n.Overlay,{ref:a,className:d,...l}),o[5]=l,o[6]=a,o[7]=d,o[8]=c):c=o[8],c});m.displayName=n.Overlay.displayName;let x=r.forwardRef((e,a)=>{let r,d,c,x,u,h,f,p=(0,s.c)(13);return p[0]!==e?({className:d,children:r,...c}=e,p[0]=e,p[1]=r,p[2]=d,p[3]=c):(r=p[1],d=p[2],c=p[3]),p[4]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsx)(m,{}),p[4]=x):x=p[4],p[5]!==d?(u=(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",d),p[5]=d,p[6]=u):u=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsxs)(n.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(l.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]}),p[7]=h):h=p[7],p[8]!==r||p[9]!==c||p[10]!==a||p[11]!==u?(f=(0,t.jsxs)(o,{children:[x,(0,t.jsxs)(n.Content,{ref:a,className:u,...c,children:[r,h]})]}),p[8]=r,p[9]=c,p[10]=a,p[11]=u,p[12]=f):f=p[12],f});x.displayName=n.Content.displayName;let u=e=>{let a,r,n,l,d=(0,s.c)(8);return d[0]!==e?({className:a,...r}=e,d[0]=e,d[1]=a,d[2]=r):(a=d[1],r=d[2]),d[3]!==a?(n=(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),d[3]=a,d[4]=n):n=d[4],d[5]!==r||d[6]!==n?(l=(0,t.jsx)("div",{className:n,...r}),d[5]=r,d[6]=n,d[7]=l):l=d[7],l};u.displayName="DialogHeader";let h=e=>{let a,r,n,l,d=(0,s.c)(8);return d[0]!==e?({className:a,...r}=e,d[0]=e,d[1]=a,d[2]=r):(a=d[1],r=d[2]),d[3]!==a?(n=(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),d[3]=a,d[4]=n):n=d[4],d[5]!==r||d[6]!==n?(l=(0,t.jsx)("div",{className:n,...r}),d[5]=r,d[6]=n,d[7]=l):l=d[7],l};h.displayName="DialogFooter";let f=r.forwardRef((e,a)=>{let r,l,d,c,o=(0,s.c)(9);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(d=(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),o[3]=r,o[4]=d):d=o[4],o[5]!==l||o[6]!==a||o[7]!==d?(c=(0,t.jsx)(n.Title,{ref:a,className:d,...l}),o[5]=l,o[6]=a,o[7]=d,o[8]=c):c=o[8],c});f.displayName=n.Title.displayName;let p=r.forwardRef((e,a)=>{let r,l,d,c,o=(0,s.c)(9);return o[0]!==e?({className:r,...l}=e,o[0]=e,o[1]=r,o[2]=l):(r=o[1],l=o[2]),o[3]!==r?(d=(0,i.cn)("text-sm text-muted-foreground",r),o[3]=r,o[4]=d):d=o[4],o[5]!==l||o[6]!==a||o[7]!==d?(c=(0,t.jsx)(n.Description,{ref:a,className:d,...l}),o[5]=l,o[6]=a,o[7]=d,o[8]=c):c=o[8],c});p.displayName=n.Description.displayName,e.s(["Dialog",()=>d,"DialogContent",()=>x,"DialogDescription",()=>p,"DialogFooter",()=>h,"DialogHeader",()=>u,"DialogTitle",()=>f,"DialogTrigger",()=>c],16780)},99734,e=>{"use strict";var a=e.i(71940);let t=(0,a.createServerReference)("404b748f0b1946809009224a95532ef6f14a9fe75e",a.callServer,void 0,a.findSourceMapURL,"getDemandas");e.s(["getDemandas",()=>t])},63998,e=>{"use strict";var a=e.i(15696),t=e.i(433),s=e.i(99734),r=e.i(71940);let n=(0,r.createServerReference)("008c67a34b93be7aa0521a8693a859ec5059b72495",r.callServer,void 0,r.findSourceMapURL,"getKPIs");var l=e.i(9709),i=e.i(85012),d=e.i(90739),c=e.i(40977),o=e.i(48746),m=e.i(80520),x=e.i(83365),u=e.i(80477);function h(e){let t,s,r,n,l,i,d,h,f=(0,c.c)(20),{title:p,value:g,trend:j,icon:v,description:N}=e;return f[0]!==p?(t=(0,a.jsx)(o.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:p}),f[0]=p,f[1]=t):t=f[1],f[2]!==v?(s=v&&(0,a.jsx)("div",{className:"text-muted-foreground",children:v}),f[2]=v,f[3]=s):s=f[3],f[4]!==t||f[5]!==s?(r=(0,a.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t,s]}),f[4]=t,f[5]=s,f[6]=r):r=f[6],f[7]!==g?(n=(0,a.jsx)("div",{className:"text-2xl font-bold",children:g}),f[7]=g,f[8]=n):n=f[8],f[9]!==j?(l=j&&(0,a.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:[j.isPositive?(0,a.jsx)(m.TrendingUp,{className:"h-4 w-4 text-emerald-500"}):(0,a.jsx)(x.TrendingDown,{className:"h-4 w-4 text-rose-500"}),(0,a.jsxs)("span",{className:(0,u.cn)("text-xs font-medium",j.isPositive?"text-emerald-500":"text-rose-500"),children:[Math.abs(j.value),"%"]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"vs mês anterior"})]}),f[9]=j,f[10]=l):l=f[10],f[11]!==N?(i=N&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:N}),f[11]=N,f[12]=i):i=f[12],f[13]!==n||f[14]!==l||f[15]!==i?(d=(0,a.jsxs)(o.CardContent,{children:[n,l,i]}),f[13]=n,f[14]=l,f[15]=i,f[16]=d):d=f[16],f[17]!==r||f[18]!==d?(h=(0,a.jsxs)(o.Card,{className:"hover:shadow-lg transition-shadow",children:[r,d]}),f[17]=r,f[18]=d,f[19]=h):h=f[19],h}var f=e.i(5480),p=e.i(9644),g=e.i(64300),j=e.i(96642),v=e.i(78989),N=e.i(85580),y=e.i(93342);function b(e){let t,s,r,n,l,i,d,m,x,u,h,b=(0,c.c)(24),{data:C,title:w,dataKey:D,color:k}=e,S=void 0===D?"value":D,M=void 0===k?"hsl(var(--primary))":k;b[0]!==w?(t=w&&(0,a.jsx)(o.CardHeader,{children:(0,a.jsx)(o.CardTitle,{children:w})}),b[0]=w,b[1]=t):t=b[1];let R=`gradient-${S}`;b[2]!==M?(s=(0,a.jsx)("stop",{offset:"5%",stopColor:M,stopOpacity:.8}),r=(0,a.jsx)("stop",{offset:"95%",stopColor:M,stopOpacity:0}),b[2]=M,b[3]=s,b[4]=r):(s=b[3],r=b[4]),b[5]!==R||b[6]!==s||b[7]!==r?(n=(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:R,x1:"0",y1:"0",x2:"0",y2:"1",children:[s,r]})}),b[5]=R,b[6]=s,b[7]=r,b[8]=n):n=b[8],b[9]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(v.CartesianGrid,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),d=(0,a.jsx)(g.XAxis,{dataKey:"name",stroke:"hsl(var(--muted-foreground))",fontSize:12}),l=(0,a.jsx)(j.YAxis,{stroke:"hsl(var(--muted-foreground))",fontSize:12}),b[9]=l,b[10]=i,b[11]=d):(l=b[9],i=b[10],d=b[11]),b[12]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(N.Tooltip,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),b[12]=m):m=b[12];let T=`url(#gradient-${S})`;return b[13]!==M||b[14]!==S||b[15]!==T?(x=(0,a.jsx)(p.Area,{type:"monotone",dataKey:S,stroke:M,fill:T,strokeWidth:2}),b[13]=M,b[14]=S,b[15]=T,b[16]=x):x=b[16],b[17]!==C||b[18]!==x||b[19]!==n?(u=(0,a.jsx)(o.CardContent,{children:(0,a.jsx)(y.ResponsiveContainer,{width:"100%",height:300,children:(0,a.jsxs)(f.AreaChart,{data:C,children:[n,i,d,l,m,x]})})}),b[17]=C,b[18]=x,b[19]=n,b[20]=u):u=b[20],b[21]!==u||b[22]!==t?(h=(0,a.jsxs)(o.Card,{children:[t,u]}),b[21]=u,b[22]=t,b[23]=h):h=b[23],h}function C(e){let t,s,r,n,l,i,d=(0,c.c)(25),{value:o,size:m,strokeWidth:x,className:h,color:f}=e,p=void 0===m?80:m,g=void 0===x?8:x,j=void 0===f?"hsl(var(--primary))":f,v=(p-g)/2,N=2*v*Math.PI,y=N-o/100*N;d[0]!==h?(t=(0,u.cn)("relative inline-flex items-center justify-center",h),d[0]=h,d[1]=t):t=d[1];let b=p/2,C=p/2;d[2]!==v||d[3]!==g||d[4]!==b||d[5]!==C?(s=(0,a.jsx)("circle",{cx:b,cy:C,r:v,stroke:"hsl(var(--muted))",strokeWidth:g,fill:"none"}),d[2]=v,d[3]=g,d[4]=b,d[5]=C,d[6]=s):s=d[6];let w=p/2,D=p/2;return d[7]!==N||d[8]!==j||d[9]!==y||d[10]!==v||d[11]!==g||d[12]!==w||d[13]!==D?(r=(0,a.jsx)("circle",{cx:w,cy:D,r:v,stroke:j,strokeWidth:g,fill:"none",strokeDasharray:N,strokeDashoffset:y,strokeLinecap:"round",className:"transition-all duration-500"}),d[7]=N,d[8]=j,d[9]=y,d[10]=v,d[11]=g,d[12]=w,d[13]=D,d[14]=r):r=d[14],d[15]!==p||d[16]!==r||d[17]!==s?(n=(0,a.jsxs)("svg",{width:p,height:p,className:"transform -rotate-90",children:[s,r]}),d[15]=p,d[16]=r,d[17]=s,d[18]=n):n=d[18],d[19]!==o?(l=(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-sm font-semibold",children:[o,"%"]})}),d[19]=o,d[20]=l):l=d[20],d[21]!==n||d[22]!==l||d[23]!==t?(i=(0,a.jsxs)("div",{className:t,children:[n,l]}),d[21]=n,d[22]=l,d[23]=t,d[24]=i):i=d[24],i}var w=e.i(20587);let D=(0,w.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var k=e.i(87061);let S=(0,w.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var M=e.i(30418);function R(){let[e,r]=(0,t.useState)(new Date),[n,l]=(0,t.useState)([]),[i,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{!async function(){try{let e=await (0,s.getDemandas)();l(e)}catch(e){console.error("Erro ao carregar demandas:",e)}finally{d(!1)}}()},[]);let c=(0,t.useMemo)(()=>{let e=[];return n.forEach(a=>{a.data_pagamento&&e.push({id:`${a.id}-pagamento`,data:new Date(a.data_pagamento),tipo:"pagamento",demanda:a.demanda,cliente:a.cliente_nome}),a.data_fim_contrato&&e.push({id:`${a.id}-fim`,data:new Date(a.data_fim_contrato),tipo:"fim_contrato",demanda:a.demanda,cliente:a.cliente_nome}),a.data_entrega&&e.push({id:`${a.id}-entrega`,data:new Date(a.data_entrega),tipo:"entrega",demanda:a.demanda,cliente:a.cliente_nome})}),e},[n]),m=new Date(e.getFullYear(),e.getMonth(),1),x=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),h=m.getDay(),f=e.toLocaleDateString("pt-BR",{month:"long",year:"numeric"}),p=e=>{switch(e){case"pagamento":return"Pagamento";case"fim_contrato":return"Fim Contrato";case"entrega":return"Entrega"}};return i?(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{children:(0,a.jsxs)(o.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(S,{className:"h-5 w-5"}),"Calendário de Pagamentos"]})}),(0,a.jsx)(o.CardContent,{children:(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})})})]}):(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(o.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(S,{className:"h-5 w-5"}),"Calendário de Pagamentos"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.Button,{variant:"outline",size:"icon",onClick:()=>{r(new Date(e.getFullYear(),e.getMonth()-1,1))},children:(0,a.jsx)(D,{className:"h-4 w-4"})}),(0,a.jsx)("span",{className:"text-sm font-medium w-40 text-center capitalize",children:f}),(0,a.jsx)(M.Button,{variant:"outline",size:"icon",onClick:()=>{r(new Date(e.getFullYear(),e.getMonth()+1,1))},children:(0,a.jsx)(k.ChevronRight,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)(o.CardContent,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"].map(e=>(0,a.jsx)("div",{className:"text-center text-xs font-medium text-muted-foreground p-2",children:e},e))}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:h}).map((e,t)=>(0,a.jsx)("div",{className:"aspect-square"},`empty-${t}`)),Array.from({length:x}).map((t,s)=>{let r,n=s+1,l=(r=new Date(e.getFullYear(),e.getMonth(),n),c.filter(e=>e.data.toDateString()===r.toDateString())),i=n===new Date().getDate()&&e.getMonth()===new Date().getMonth()&&e.getFullYear()===new Date().getFullYear();return(0,a.jsxs)("div",{className:(0,u.cn)("aspect-square border border-border rounded-lg p-1 relative cursor-pointer hover:bg-accent transition-colors",i&&"ring-2 ring-primary"),title:l.map(e=>`${p(e.tipo)}: ${e.demanda}`).join("\n"),children:[(0,a.jsx)("div",{className:"text-xs font-medium mb-1",children:n}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[l.slice(0,2).map(e=>(0,a.jsx)("div",{className:(0,u.cn)("text-[10px] px-1 py-0.5 rounded border truncate",(e=>{switch(e){case"pagamento":return"bg-blue-500/20 border-blue-500/50 text-blue-400";case"fim_contrato":return"bg-red-500/20 border-red-500/50 text-red-400";case"entrega":return"bg-green-500/20 border-green-500/50 text-green-400"}})(e.tipo)),title:`${p(e.tipo)}: ${e.demanda} - ${e.cliente}`,children:p(e.tipo)},e.id)),l.length>2&&(0,a.jsxs)("div",{className:"text-[10px] text-muted-foreground",children:["+",l.length-2]})]})]},n)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-blue-500/20 border border-blue-500/50"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Pagamento"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-red-500/20 border border-red-500/50"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Fim Contrato"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded bg-green-500/20 border border-green-500/50"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Entrega"})]})]})]})})]})}var T=e.i(63237),_=e.i(98744),P=e.i(83970);let E=(0,w.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),A=(0,w.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var B=e.i(54792),F=e.i(77952);let U=(0,w.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),z=(0,w.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),H=(0,w.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var L=e.i(30836),$=e.i(21303),O=e.i(42915),q=e.i(33870),Y=e.i(16780);function K(){let e=(0,q.useRouter)(),[r,c]=(0,t.useState)([]),[m,x]=(0,t.useState)(!0),[u,f]=(0,t.useState)({}),[p,g]=(0,t.useState)({total:0,pendentes:0,emAndamento:0,concluidos:0}),[j,v]=(0,t.useState)([]),[N,y]=(0,t.useState)([]),[w,D]=(0,t.useState)(""),[k,K]=(0,t.useState)(!1),[W,G]=(0,t.useState)(null);async function I(){x(!0);try{let[e,a,t,r]=await Promise.all([(0,s.getDemandas)(u),n(),(0,l.getUniqueResponsaveis)(),(0,i.getUniqueClientes)()]);c(e),g(a),v(t),y(r)}catch(e){console.error("Erro ao carregar dados:",e)}finally{x(!1)}}(0,t.useEffect)(()=>{I()},[u]);let V=()=>{f({...u,search:w||void 0})},J=async()=>{if(W)try{await (0,d.deleteDemanda)(W),c(r.filter(e=>e.id!==W)),K(!1),G(null),I()}catch(e){console.error("Erro ao excluir demanda:",e),alert("Erro ao excluir demanda")}};return(0,a.jsxs)("div",{className:"flex-1 space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Visão geral das demandas jurídicas"})]}),(0,a.jsx)(O.default,{href:"/juridico/nova",children:(0,a.jsxs)(M.Button,{children:[(0,a.jsx)(A,{className:"mr-2 h-4 w-4"}),"Nova Demanda"]})})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(h,{title:"Total de Demandas",value:p.total,icon:(0,a.jsx)(P.FileText,{className:"h-4 w-4"}),trend:{value:12,isPositive:!0}}),(0,a.jsx)(h,{title:"Pendentes",value:p.pendentes,icon:(0,a.jsx)(U,{className:"h-4 w-4"}),trend:{value:-5,isPositive:!1}}),(0,a.jsx)(h,{title:"Em Andamento",value:p.emAndamento,icon:(0,a.jsx)(z,{className:"h-4 w-4"}),trend:{value:8,isPositive:!0}}),(0,a.jsx)(h,{title:"Concluídos",value:p.concluidos,icon:(0,a.jsx)(H,{className:"h-4 w-4"}),trend:{value:15,isPositive:!0}})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-10",children:[(0,a.jsxs)(o.Card,{className:"col-span-4",children:[(0,a.jsx)(o.CardHeader,{children:(0,a.jsx)(o.CardTitle,{children:"Evolução Mensal"})}),(0,a.jsx)(o.CardContent,{children:(0,a.jsx)(b,{data:[{name:"Jan",value:45},{name:"Fev",value:52},{name:"Mar",value:48},{name:"Abr",value:61},{name:"Mai",value:55},{name:"Jun",value:67}],title:""})})]}),(0,a.jsx)("div",{className:"col-span-3 space-y-4",children:(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{children:(0,a.jsx)(o.CardTitle,{children:"Progresso Geral"})}),(0,a.jsxs)(o.CardContent,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Concluídos"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[p.concluidos," de ",p.total," demandas"]})]}),(0,a.jsx)(C,{value:p.total>0?Math.round(p.concluidos/p.total*100):0,color:"hsl(var(--success))"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Em Andamento"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[p.emAndamento," demandas ativas"]})]}),(0,a.jsx)(C,{value:p.total>0?Math.round(p.emAndamento/p.total*100):0,color:"hsl(var(--warning))"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Pendentes"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[p.pendentes," aguardando"]})]}),(0,a.jsx)(C,{value:p.total>0?Math.round(p.pendentes/p.total*100):0,color:"hsl(var(--error))"})]})]})]})}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsx)(R,{})})]}),(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o.CardTitle,{children:"Demandas Recentes"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(B.Search,{className:"absolute left-2 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(_.Input,{type:"search",placeholder:"Buscar...",value:w,onChange:e=>D(e.target.value),onKeyPress:e=>"Enter"===e.key&&V(),className:"w-64 pl-8"})]}),(0,a.jsx)(M.Button,{variant:"outline",onClick:V,children:"Filtrar"})]})]})}),(0,a.jsx)(o.CardContent,{children:m?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(F.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):0===r.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,a.jsx)(P.FileText,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Nenhuma demanda encontrada"})]}):(0,a.jsx)("div",{className:"space-y-4",children:r.slice(0,10).map(t=>(0,a.jsxs)("div",{className:"flex items-start gap-2 rounded-lg border border-border bg-card p-4 transition-colors hover:bg-accent",children:[(0,a.jsxs)(O.default,{href:`/juridico/${t.id}`,className:"flex-1 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h3",{className:"font-semibold",children:t.demanda}),(e=>{switch(e){case"CONCLUÍDO":return(0,a.jsx)(T.Badge,{variant:"success",children:"Concluído"});case"EM ANDAMENTO":return(0,a.jsx)(T.Badge,{variant:"warning",children:"Em Andamento"});case"PENDENTE":return(0,a.jsx)(T.Badge,{variant:"error",children:"Pendente"});case"Cancelado":return(0,a.jsx)(T.Badge,{variant:"outline",children:"Cancelado"});default:return(0,a.jsx)(T.Badge,{variant:"outline",children:e})}})(t.status)]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t.cliente_nome}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(E,{className:"h-3 w-3"}),t.responsavel]}),t.data_solicitacao&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(S,{className:"h-3 w-3"}),new Date(t.data_solicitacao).toLocaleDateString("pt-BR")]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(M.Button,{variant:"ghost",size:"icon",onClick:a=>{var s;a.preventDefault(),s=t.id,e.push(`/juridico/${s}`)},className:"h-8 w-8",children:(0,a.jsx)(L.Pencil,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)(M.Button,{variant:"ghost",size:"icon",onClick:e=>{var a;return a=t.id,void(e.preventDefault(),e.stopPropagation(),G(a),K(!0))},className:"h-8 w-8 text-destructive hover:text-destructive",children:(0,a.jsx)($.Trash2,{className:"h-4 w-4"})})]})]},t.id))})})]}),(0,a.jsx)(Y.Dialog,{open:k,onOpenChange:K,children:(0,a.jsxs)(Y.DialogContent,{children:[(0,a.jsxs)(Y.DialogHeader,{children:[(0,a.jsx)(Y.DialogTitle,{children:"Excluir Demanda"}),(0,a.jsx)(Y.DialogDescription,{children:"Tem certeza que deseja excluir esta demanda? Esta ação não pode ser desfeita."})]}),(0,a.jsxs)(Y.DialogFooter,{children:[(0,a.jsx)(M.Button,{variant:"outline",onClick:()=>K(!1),children:"Cancelar"}),(0,a.jsx)(M.Button,{variant:"destructive",onClick:J,children:"Excluir"})]})]})})]})}e.s(["default",()=>K],63998)}]);